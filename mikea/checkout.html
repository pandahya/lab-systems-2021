<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>MIKEA</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <link href="style.css" rel="stylesheet">
</head>

<body>
    <nav>
        <div id="menuToggle">
            <input type="checkbox" />
            <span></span>
            <span></span>
            <span></span>
            <ul id="menu">
                <a href="rooms.html"><li>home</li></a>
                <a href="cart.html"><li id="cart_num">cart (0)</li></a>
                <a href="login.html"><li id="menuLogin">login</li></a>
              </ul>
        </div>
    </nav>
<main class="fullwidth">
    <h1 class="breadcrumb"><a href="rooms.html">MIKEA</a> > <a href="cart.html">my cart</a> > <strong>checkout</strong></h1>
<div class="split">
    <div>
        <section class="checkout_box" id="checkout_address">
            <h2 style="font-size: 1.5em;">Shipping Address:</h2>
            <button id="scan_address">scan microchip</button>
            <!-- <h1 class="open_modal">scan microchip</h1> -->
            <!-- https://www.w3schools.com/howto/howto_css_modals.asp -->
        </section>
        <section class="checkout_box" id="checkout_payment">
            <h2 style="font-size: 1.5em;">Payment:</h2>
            <button id="scan_payment">scan microchip</button>
        </section>
        <section class="checkout_box" id="checkout_reciept">
            <div class="two">
                <article id="product_list">
                    <h2 style="font-size: 1.5em;">Product</h2>
                </article>
                <article id="price_list">
                    <h2 style="font-size: 1.5em;">Price</h2>
                </article>
        </div>
        <div class="two">
            <article id="subtotal">
                <h2>subtotal</h2>
                <h2>tax</h2>
            </article>
            <article>
                <h2 id="subprice"></h2>
                <h2 id="tax"></h2>
            </article>
        </div>
        <div class="two" style="border-bottom:none">
            <article id="total">
                <h2>total</h2>
            </article>
            <article>
                <h2 id="total_price"></h2>
            </article>
        </div>
        </section>
        <section>
            <button id="confirm">confirm order</button>
        </section>
    </div>
    <div style="width:20vw"></div>
</div>
<div class="modal" id="scan">
    <div class="modal_content">
        <span class="close">&times;</span>
        <h1>scan microchip now</h1>
        <video autoplay></video>
    </div>
</div>
<div class="modal" id="confirmation">
    <div class="modal_content">
        <h1>ORDER CONFIRMED</h1>
        <p id="clear"><a href="rooms.html">keep shopping &rarr;</a></p>
    </div>
</div>
</main>

</body>
<script src="js/scan.js"></script>
<script>
    const cartNum = document.getElementById("cart_num");
    const productList = document.getElementById("product_list");
    const priceList = document.getElementById("price_list");
    const subprice = document.getElementById("subprice")
    const tax = document.getElementById("tax");
    const totalPrice = document.getElementById("total_price");
    let cartItems = [];
    let cartPrices = [];
    let subpriceNum, taxNum, totalNum;
    let cartBox = document.querySelector("#cart_box");
    const menuLogin = document.getElementById("menuLogin");
    let loginState = localStorage.getItem("login");
    
    if(loginState === "true"){
        menuLogin.innerHTML = "Hi, Tanvi";
    }else if(loginState === "false"){
        menuLogin.innerHTML = "login";
    }
    let plantNum = sessionStorage.length;
    cartNum.innerHTML = `cart (${sessionStorage.length})`;

    for(let i=0; i<plantNum; i++){
        cartItems.push("plant");
        cartPrices.push("2000");
        subpriceNum = 2000 + (i*2000);
        taxNum = subpriceNum*0.2;
        totalNum = subpriceNum + taxNum;
    }
    cartItems.forEach(function(){
        const p1 = document.createElement("H2");
        const p2 = document.createElement("H2");
        newPlant = document.createElement("div");
        const listPlant = document.createTextNode("plant");
        const listPrice = document.createTextNode("Ͼ2000");
        p1.appendChild(listPlant);
        productList.appendChild(p1);
        p1.style.fontWeight = "400";
        p2.appendChild(listPrice);
        priceList.appendChild(p2);
        p2.style.fontWeight = "400";
        subprice.innerHTML = "Ͼ"+subpriceNum;
        tax.innerHTML = "Ͼ"+taxNum;
        totalPrice.innerHTML = "Ͼ"+totalNum;
    });

    const clear = document.getElementById("clear");
    clear.addEventListener("click",function(){
        sessionStorage.clear();
    })
</script>
</html>